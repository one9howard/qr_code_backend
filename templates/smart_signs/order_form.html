{% extends "base.html" %}
{% block body_class %}submit bg-image-dark{% endblock %}
{% block title %}Order SmartSign{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/submit.css') }}">

<div class="submit-container" style="margin-top: 2rem; position: relative;">
    <div class="form-container">
        <h2 style="margin-bottom: 10px;">Order Your SmartSign</h2>
        <p class="text-muted" style="margin-bottom: 2rem;">Complete the details below to customize your sign.</p>

        <form method="POST" action="{{ url_for('smart_signs.checkout_smartsign') }}" enctype="multipart/form-data"
            class="form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            {% if asset_id %}
            <input type="hidden" name="asset_id" value="{{ asset_id }}">
            {% endif %}

            <!-- Section 1: Sign Config -->
            <h3 style="color: #2196f3; margin-bottom: 1rem;">1. Sign Configuration</h3>

            <label style="color: #666; font-size: 0.9rem; margin-bottom: 5px; display: block;">Size</label>
            <div class="sign-options-container" style="margin-bottom: 1.5rem;">
                <select name="size" class="size-selector">
                    <option value="18x24" selected>18" x 24" (Standard)</option>
                    <option value="24x36">24" x 36" (Large)</option>
                    <option value="36x24">36" x 24" (Large Wide)</option>
                </select>
            </div>

            <label style="color: #666; font-size: 0.9rem; margin-bottom: 5px; display: block;">Layout Style</label>
            <select name="layout_id"
                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 1.5rem;"
                required>
                <option value="smart_v1_photo_banner">Photo Banner (Agent Photo + Brand Color)</option>
                <option value="smart_v1_minimal">Minimal (Clean, White Background)</option>
                <option value="smart_v1_agent_brand">Agent Brand (Logo Focused)</option>
            </select>

            <label style="color: #666; font-size: 0.9rem; margin-bottom: 10px; display: block;">Banner Color (For Photo
                Banner Layout)</label>
            <div class="color-palette" style="justify-content: flex-start; margin-bottom: 1.5rem;">
                {% for color in colors %}
                <label class="color-option">
                    <input type="radio" name="banner_color_id" value="{{ color.id }}" {% if loop.first %}checked{% endif
                        %}>
                    <div class="color-swatch" style="background-color: {{ color.hex }};"></div>
                </label>
                {% endfor %}
            </div>

            <hr style="margin: 1.5rem 0; opacity: 0.1;">

            <!-- Section 2: Agent Info -->
            <h3 style="color: #2196f3; margin-bottom: 1rem;">2. Agent Details</h3>

            <input type="text" name="agent_name" placeholder="Agent Name" value="{{ current_user.full_name }}" required>
            <input type="text" name="brokerage_name" placeholder="Brokerage (e.g. Realty One)" required>

            <div style="display: flex; gap: 10px;">
                <input type="tel" name="agent_phone" placeholder="Phone" style="flex: 1;" required>
                <input type="email" name="agent_email" placeholder="Email" value="{{ current_user.email }}"
                    style="flex: 1;" required>
            </div>

            <hr style="margin: 1.5rem 0; opacity: 0.1;">

            <!-- Section 3: Uploads -->
            <h3 style="color: #2196f3; margin-bottom: 1rem;">3. Photos & Logos</h3>

            <label style="color: #666; font-size: 0.9rem; margin-bottom: 5px; display: block;">Agent Headshot</label>
            <input type="file" name="headshot_file" accept="image/*" style="padding: 10px; margin-bottom: 1rem;">

            <label style="color: #666; font-size: 0.9rem; margin-bottom: 5px; display: block;">Brokerage/Agent
                Logo</label>
            <input type="file" name="logo_file" accept="image/*" style="padding: 10px; margin-bottom: 1rem;">

            <button type="submit" class="glass-button accent generate-btn" style="width: 100%; margin-top: 1rem;">
                Proceed to Checkout
            </button>

            <p style="text-align: center; margin-top: 1rem; font-size: 0.8rem; color: #666;">
                <i class="icon-lock"></i> Secure Payment via Stripe
            </p>
        </form>
    </div>
</div>
{% endblock %}