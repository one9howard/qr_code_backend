<!-- Sidebar (Keeping logic as is, visual update via global CSS) -->
<aside class="app-sidebar" id="sidebar">
    <!-- Close Button (Mobile) -->
    <button class="close-sidebar-btn" onclick="document.getElementById('sidebar').classList.remove('active')"
        style="display: none; position: absolute; top: 16px; right: 16px; background: none; border: none; color: white; font-size: 24px; cursor: pointer; z-index: 50;">
        &times;
    </button>
    <script>
        // Simple CSS injection for mobile visibility
        const style = document.createElement('style');
        style.textContent = `
                @media (max-width: 768px) {
                    .close-sidebar-btn { display: block !important; }
                }
            `;
        document.head.appendChild(style);
    </script>

    <a href="/" class="sidebar-logo">
        <img src="{{ url_for('static', filename='img/logo.png') }}" alt="InSite Signs" style="height: 56px;">
    </a>

    <div style="padding: 0 16px 16px 16px;">
        <a href="{{ url_for('dashboard.new_property') }}" class="glass-button accent"
            style="display: flex; justify-content: center; text-align: center; gap: 8px; font-size: 0.9rem; margin-bottom: 8px;">
            <span>+</span> Create New Property
        </a>
    </div>

    <nav class="sidebar-nav">
        <a href="{{ url_for('dashboard.today') }}"
            class="nav-item {% if request.endpoint == 'dashboard.today' %}active{% endif %}">
            <span class="nav-icon">ğŸ“…</span> Today
        </a>

        <a href="{{ url_for('dashboard.index', _anchor='listings-section') }}"
            class="nav-item {% if request.endpoint == 'dashboard.index' and not request.hash == '#smart-signs-section' %}active{% endif %}">
            <span class="nav-icon">ğŸ </span> Properties
        </a>
        <a href="{{ url_for('lead_management.list_leads') }}"
            class="nav-item {% if request.endpoint and request.endpoint.startswith('lead_management.') %}active{% endif %}">
            <span class="nav-icon">ğŸ‘¥</span> Leads
        </a>
        <a href="{{ url_for('dashboard.index', _anchor='smart-signs-section') }}" class="nav-item">
            <span class="nav-icon">ğŸ“¦</span> SmartSigns
        </a>
        <a href="{{ url_for('dashboard.index', _anchor='listings-section') }}" class="nav-item">
            <span class="nav-icon">ğŸ›‘</span> Yard Signs
        </a>
        <a href="{{ url_for('dashboard.kits') }}"
            class="nav-item {% if request.endpoint == 'dashboard.kits' %}active{% endif %}">
            <span class="nav-icon">ğŸ¨</span> Kits
        </a>

        <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 12px 16px;"></div>

        <a href="{{ url_for('account.index') }}"
            class="nav-item {% if request.endpoint == 'account.index' %}active{% endif %}">
            <span class="nav-icon">âš™ï¸</span> Settings
        </a>
    </nav>

    <div class="sidebar-footer">
        <div class="user-mini-profile">
            <div class="user-avatar">
                {{ current_user.display_name[0] | upper }}
            </div>
            <div class="user-info">
                <div class="user-name">{{ current_user.display_name }}</div>
                <div class="user-role">
                    {% if current_user.is_pro %}
                    <span style="color: #4facfe;">Pro (Active)</span>
                    {% else %}
                    Free Plan
                    {% endif %}
                </div>
            </div>
            <a href="{{ url_for('auth.logout') }}" style="color: #64748b; text-decoration: none;" title="Logout">â†ªï¸</a>
        </div>
    </div>
</aside>